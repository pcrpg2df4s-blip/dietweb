<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ö–∞–ª–æ—Ä–∏–π</title>
    <link rel="stylesheet" href="style.css?v=1.1.28">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        
        <div id="step-1" class="step active">
            <h1>–í–∞—à –ø–æ–ª</h1>
            <p class="subtitle">–≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞.</p>
            
            <div class="options-vertical">
                <button class="option-btn" onclick="selectGender('male')">–ú—É–∂—Å–∫–æ–π</button>
                <button class="option-btn" onclick="selectGender('female')">–ñ–µ–Ω—Å–∫–∏–π</button>
            </div>
        </div>

        <div id="step-2" class="step">
            <div class="header-back" onclick="prevStep(1)">‚Üê</div>
            <h1>–°–∫–æ–ª—å–∫–æ —É –≤–∞—Å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –≤ –Ω–µ–¥–µ–ª—é?</h1>
            
            <div class="options-vertical">
                <div class="card" onclick="selectActivity(1.2)">
                    <div class="icon">‚¶ø</div>
                    <div class="text">
                        <h3>0-2</h3>
                        <p>–¢—Ä–µ–Ω–∏—Ä—É—é—Å—å —Ä–µ–¥–∫–æ</p>
                    </div>
                </div>
                <div class="card" onclick="selectActivity(1.55)">
                    <div class="icon">‚à¥</div>
                    <div class="text">
                        <h3>3-5</h3>
                        <p>–ù–µ—Å–∫–æ–ª—å–∫–æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</p>
                    </div>
                </div>
                <div class="card" onclick="selectActivity(1.725)">
                    <div class="icon">‚Åô</div>
                    <div class="text">
                        <h3>6+</h3>
                        <p>–ê–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Ä—Ç—Å–º–µ–Ω</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-3" class="step">
            <div class="header-back" onclick="prevStep(2)">‚Üê</div>
            <h1>–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h1>
            
            <div class="graph-container">
                <div class="graph-placeholder">
                    <svg viewBox="0 0 300 180" style="width: 100%; height: auto;">
                        <!-- Grid Lines -->
                        <line x1="30" y1="50" x2="270" y2="50" stroke="#eee" stroke-dasharray="4" />
                        <line x1="30" y1="130" x2="270" y2="130" stroke="#eee" stroke-dasharray="4" />
                        
                        <!-- Red Line Area (Traditional Diet) -->
                        <path d="M30,50 C100,50 140,110 160,100 S230,20 270,20 L270,50 L30,50 Z" fill="rgba(255, 77, 77, 0.1)" />
                        <!-- Black Line Area (App) -->
                        <path d="M30,50 C100,50 200,130 270,130 L270,150 L30,150 L30,50 Z" fill="rgba(0, 0, 0, 0.05)" />
                        
                        <!-- Red Line -->
                        <path d="M30,50 C100,50 140,110 160,100 S230,20 270,20" fill="none" stroke="#ff4d4d" stroke-width="3" stroke-linecap="round" />
                        <!-- Black Line -->
                        <path d="M30,50 C100,50 200,130 270,130" fill="none" stroke="#000" stroke-width="3" stroke-linecap="round" />
                        
                        <!-- Points -->
                        <circle cx="30" cy="50" r="5" fill="#fff" stroke="#000" stroke-width="2" />
                        <circle cx="270" cy="130" r="5" fill="#fff" stroke="#000" stroke-width="2" />
                        
                        <!-- Labels -->
                        <text x="30" y="30" fill="#000" font-size="14" font-weight="bold">–í–∞—à –≤–µ—Å</text>
                        
                        <text x="210" y="70" fill="#666" font-size="10">–û–±—ã—á–Ω–∞—è –¥–∏–µ—Ç–∞</text>
                        <text x="50" y="115" fill="#000" font-size="10" font-weight="bold">‚òÖ –ù–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</text>
                        
                        <text x="30" y="170" fill="#999" font-size="10">–ú–µ—Å—è—Ü 1</text>
                        <text x="240" y="170" fill="#999" font-size="10">–ú–µ—Å—è—Ü 6</text>
                    </svg>
                </div>
                <p style="text-align: center; margin-top: 20px; font-size: 14px; color: #555; line-height: 1.4;">
                    <b>80% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</b> —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–∞–∂–µ —á–µ—Ä–µ–∑ –ø–æ–ª–≥–æ–¥–∞
                </p>
            </div>

            <button class="main-btn" onclick="nextStep(4)">–î–∞–ª–µ–µ</button>
        </div>

        <div id="step-4" class="step">
            <div class="header-back" onclick="prevStep(3)">‚Üê</div>
            <h1>–†–æ—Å—Ç –∏ –≤–µ—Å</h1>
            <p class="subtitle">–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞</p>

            <div class="inputs-container">
                <div class="input-group">
                    <label>–†–æ—Å—Ç (—Å–º)</label>
                    <input type="number" id="height" value="175" placeholder="175">
                </div>
                <div class="input-group">
                    <label>–í–µ—Å (–∫–≥)</label>
                    <input type="number" id="weight" value="75" placeholder="75">
                </div>
            </div>

            <button class="main-btn" onclick="nextStep(5)">–î–∞–ª–µ–µ</button>
        </div>

        <!-- New Steps based on images -->
        <div id="step-5" class="step">
            <div class="header-back" onclick="prevStep(4)">‚Üê</div>
            <div class="progress-bar"><div class="progress" style="width: 50%;"></div></div>
            <h1>–ö–æ–≥–¥–∞ –≤—ã —Ä–æ–¥–∏–ª–∏—Å—å?</h1>
            <p class="subtitle">–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –æ—Ç–∫–∞–ª–∏–±—Ä–æ–≤–∞—Ç—å –≤–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω.</p>
            
            <div class="date-picker-container">
                <input type="date" id="birthdate" class="date-input" value="2005-01-01">
            </div>

            <button class="main-btn" onclick="saveBorn()">–î–∞–ª–µ–µ</button>
        </div>

        <div id="step-6" class="step">
            <div class="header-back" onclick="prevStep(5)">‚Üê</div>
            <div class="progress-bar"><div class="progress" style="width: 60%;"></div></div>
            <h1>–ö–∞–∫–∞—è –≤–∞—à–∞ —Ü–µ–ª—å?</h1>
            <p class="subtitle">–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º —Å–æ—Å—Ç–∞–≤–∏—Ç—å –ø–ª–∞–Ω –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –∫–∞–ª–æ—Ä–∏–π.</p>
            
            <div class="options-vertical">
                <button class="option-btn" onclick="selectGoal('lose')">–ü–æ—Ö—É–¥–µ—Ç—å</button>
                <button class="option-btn" onclick="selectGoal('maintain')">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –≤–µ—Å</button>
                <button class="option-btn" onclick="selectGoal('gain')">–ù–∞–±—Ä–∞—Ç—å –≤–µ—Å</button>
            </div>
        </div>

        <div id="step-7" class="step">
            <div class="header-back" onclick="prevStep(6)">‚Üê</div>
            <div class="progress-bar"><div class="progress" style="width: 70%;"></div></div>
            <h1>–ß—Ç–æ –º–µ—à–∞–µ—Ç –≤–∞–º –¥–æ—Å—Ç–∏—á—å —Ü–µ–ª–∏?</h1>
            
            <div class="options-vertical">
                <div class="card" onclick="selectStopper('consistency')">
                    <div class="icon">üìä</div>
                    <div class="text">
                        <h3>–ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω—ã</h3>
                    </div>
                </div>
                <div class="card" onclick="selectStopper('eating_habits')">
                    <div class="icon">üçî</div>
                    <div class="text">
                        <h3>–ù–µ–∑–¥–æ—Ä–æ–≤—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏ –≤ –µ–¥–µ</h3>
                    </div>
                </div>
                <div class="card" onclick="selectStopper('support')">
                    <div class="icon">ü§ù</div>
                    <div class="text">
                        <h3>–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</h3>
                    </div>
                </div>
                <div class="card" onclick="selectStopper('schedule')">
                    <div class="icon">üìÖ</div>
                    <div class="text">
                        <h3>–ü–ª–æ—Ç–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫</h3>
                    </div>
                </div>
                <div class="card" onclick="selectStopper('inspiration')">
                    <div class="icon">üí°</div>
                    <div class="text">
                        <h3>–ù–µ—Ç –∏–¥–µ–π –¥–ª—è –±–ª—é–¥</h3>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-8" class="step">
            <div class="header-back" onclick="prevStep(7)">‚Üê</div>
            <div class="progress-bar"><div class="progress" style="width: 80%;"></div></div>
            <h1>–í—ã –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–µ—Ç–µ—Å—å –¥–∏–µ—Ç—ã?</h1>
            
            <div class="options-vertical">
                <div class="card" onclick="selectDiet('classic')">
                    <div class="icon">üçó</div>
                    <div class="text">
                        <h3>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è</h3>
                    </div>
                </div>
                <div class="card" onclick="selectDiet('pescatarian')">
                    <div class="icon">üêü</div>
                    <div class="text">
                        <h3>–ü–µ—Å–∫–µ—Ç–∞—Ä–∏–∞–Ω—Å—Ç–≤–æ</h3>
                    </div>
                </div>
                <div class="card" onclick="selectDiet('vegetarian')">
                    <div class="icon">ü•¶</div>
                    <div class="text">
                        <h3>–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å—Ç–≤–æ</h3>
                    </div>
                </div>
                <div class="card" onclick="selectDiet('vegan')">
                    <div class="icon">üå±</div>
                    <div class="text">
                        <h3>–í–µ–≥–∞–Ω—Å—Ç–≤–æ</h3>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-9" class="step">
            <div class="header-back" onclick="prevStep(8)">‚Üê</div>
            <div class="progress-bar"><div class="progress" style="width: 90%;"></div></div>
            <h1>–ß–µ–≥–æ –±—ã –≤—ã —Ö–æ—Ç–µ–ª–∏ –¥–æ—Å—Ç–∏—á—å?</h1>
            
            <div class="options-vertical">
                <div class="card" onclick="selectAccomplish('healthier')">
                    <div class="icon">üçé</div>
                    <div class="text">
                        <h3>–ü–∏—Ç–∞—Ç—å—Å—è –∏ –∂–∏—Ç—å –∑–¥–æ—Ä–æ–≤–µ–µ</h3>
                    </div>
                </div>
                <div class="card" onclick="selectAccomplish('energy')">
                    <div class="icon">‚òÄÔ∏è</div>
                    <div class="text">
                        <h3>–£–ª—É—á—à–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ</h3>
                    </div>
                </div>
                <div class="card" onclick="selectAccomplish('motivated')">
                    <div class="icon">üí™</div>
                    <div class="text">
                        <h3>–û—Å—Ç–∞–≤–∞—Ç—å—Å—è –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º</h3>
                    </div>
                </div>
                <div class="card" onclick="selectAccomplish('body')">
                    <div class="icon">üßò</div>
                    <div class="text">
                        <h3>–ß—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –ª—É—á—à–µ</h3>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-10" class="step">
            <div class="loading-container">
                <div class="percentage" id="load-percentage">0%</div>
                <h1 id="loading-title">–ì–æ—Ç–æ–≤–∏–º –≤–∞—à –ø–ª–∞–Ω</h1>
                
                <div class="loading-bar-wrapper">
                    <div class="loading-bar-fill" id="load-progress"></div>
                </div>

                <p class="loading-status" id="load-status">–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ...</p>

                <div class="recommendation-card">
                    <h3>–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è:</h3>
                    <ul class="check-list">
                        <li id="check-calories">
                            <span>–ö–∞–ª–æ—Ä–∏–∏</span>
                            <div class="check-icon">‚úì</div>
                        </li>
                        <li id="check-carbs">
                            <span>–£–≥–ª–µ–≤–æ–¥—ã</span>
                            <div class="check-icon">‚úì</div>
                        </li>
                        <li id="check-protein">
                            <span>–ë–µ–ª–∫–∏</span>
                            <div class="check-icon">‚úì</div>
                        </li>
                        <li id="check-fats">
                            <span>–ñ–∏—Ä—ã</span>
                            <div class="check-icon">‚úì</div>
                        </li>
                        <li id="check-health">
                            <span>–ò–Ω–¥–µ–∫—Å –∑–¥–æ—Ä–æ–≤—å—è</span>
                            <div class="check-icon">‚úì</div>
                        </li>
                    </ul>
                </div>
            </div>

<button id="final-btn" class="main-btn" style="display: none;" onclick="showResults()">–ü–æ–ª—É—á–∏—Ç—å –ø–ª–∞–Ω</button>        </div>

        <div id="step-11" class="step">
            <div class="result-header">
                <div class="check-circle-big">‚úì</div>
                <h1>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!<br>–í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –≥–æ—Ç–æ–≤!</h1>
                <p class="subtitle" id="goal-text">–í–∞—à–∞ —Ü–µ–ª—å: –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –≤–µ—Å–∞</p>
                <div class="target-weight-badge" id="target-weight">75 –∫–≥</div>
            </div>

            <div class="daily-recommendations">
                <div class="section-title">
                    <h2>–ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –Ω–æ—Ä–º–∞</h2>
                    <span>–ú–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è</span>
                </div>

                <div class="macros-grid">
                    <div class="macro-card">
                        <div class="macro-info">
                            <span class="macro-icon">üî•</span>
                            <span class="macro-name">–ö–∞–ª–æ—Ä–∏–∏</span>
                        </div>
                        <div class="progress-ring-container">
                            <svg class="progress-ring" width="100" height="100">
                                <circle class="progress-ring__circle-bg" stroke="#f0f0f5" stroke-width="8" fill="transparent" r="40" cx="50" cy="50"/>
                                <circle id="ring-calories" class="progress-ring__circle" stroke="#000" stroke-width="8" fill="transparent" r="40" cx="50" cy="50"/>
                            </svg>
                            <div class="macro-value" id="res-calories">2062</div>
                        </div>
                    </div>

                    <div class="macro-card">
                        <div class="macro-info">
                            <span class="macro-icon">üåæ</span>
                            <span class="macro-name">–£–≥–ª–µ–≤–æ–¥—ã</span>
                        </div>
                        <div class="progress-ring-container">
                            <svg class="progress-ring" width="100" height="100">
                                <circle class="progress-ring__circle-bg" stroke="#f0f0f5" stroke-width="8" fill="transparent" r="40" cx="50" cy="50"/>
                                <circle id="ring-carbs" class="progress-ring__circle" stroke="#ffcc80" stroke-width="8" fill="transparent" r="40" cx="50" cy="50"/>
                            </svg>
                            <div class="macro-value" id="res-carbs">234–≥</div>
                        </div>
                    </div>

                    <div class="macro-card">
                        <div class="macro-info">
                            <span class="macro-icon">ü•©</span>
                            <span class="macro-name">–ë–µ–ª–∫–∏</span>
                        </div>
                        <div class="progress-ring-container">
                            <svg class="progress-ring" width="100" height="100">
                                <circle class="progress-ring__circle-bg" stroke="#f0f0f5" stroke-width="8" fill="transparent" r="40" cx="50" cy="50"/>
                                <circle id="ring-protein" class="progress-ring__circle" stroke="#ff8a80" stroke-width="8" fill="transparent" r="40" cx="50" cy="50"/>
                            </svg>
                            <div class="macro-value" id="res-protein">152–≥</div>
                        </div>
                    </div>

                    <div class="macro-card">
                        <div class="macro-info">
                            <span class="macro-icon">ü•ë</span>
                            <span class="macro-name">–ñ–∏—Ä—ã</span>
                        </div>
                        <div class="progress-ring-container">
                            <svg class="progress-ring" width="100" height="100">
                                <circle class="progress-ring__circle-bg" stroke="#f0f0f5" stroke-width="8" fill="transparent" r="40" cx="50" cy="50"/>
                                <circle id="ring-fats" class="progress-ring__circle" stroke="#81d4fa" stroke-width="8" fill="transparent" r="40" cx="50" cy="50"/>
                            </svg>
                            <div class="macro-value" id="res-fats">57–≥</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="how-to-reach">
                <h2>–ö–∞–∫ –¥–æ—Å—Ç–∏—á—å —Ü–µ–ª–∏:</h2>
                <div class="tips-container" id="ai-tips">
                    <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ AI -->
                    <div class="tip-item">
                        <div class="tip-icon">üíñ</div>
                        <div class="tip-text">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω–¥–µ–∫—Å –∑–¥–æ—Ä–æ–≤—å—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞</div>
                    </div>
                    <div class="tip-item">
                        <div class="tip-icon">ü•ë</div>
                        <div class="tip-text">–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∫–∞–∂–¥—ã–π –ø—Ä–∏–µ–º –ø–∏—â–∏</div>
                    </div>
                    <div class="tip-item">
                        <div class="tip-icon">‚è≤Ô∏è</div>
                        <div class="tip-text">–°–ª–µ–¥—É–π—Ç–µ –¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Ä–º–µ –∫–∞–ª–æ—Ä–∏–π</div>
                    </div>
                </div>
            </div>

            <button class="main-btn" onclick="goToHome()">–ù–∞—á–∞—Ç—å!</button>
        </div>

        <div id="step-12" class="step step-home">
            <div class="home-page">
                <div id="week-calendar" class="calendar-container"></div>
                <div class="home-top-header">
                <!-- Streak badge removed -->
            </div>


            <div class="main-calorie-card">
                <div class="calorie-left">
                    <h2 id="home-calories-left">0</h2>
                    <span id="home-calories-total">–ö–∫–∞–ª –æ—Å—Ç–∞–ª–æ—Å—å</span>
                </div>
                <div class="calorie-ring-container">
                    <svg viewBox="0 0 100 100" class="large-ring">
                        <circle cx="50" cy="50" r="45" fill="none" stroke="#f0f0f5" stroke-width="8"></circle>
                        <circle id="home-ring-calories" cx="50" cy="50" r="45" fill="none" stroke="#000" stroke-width="8" stroke-dasharray="282.7" stroke-dashoffset="282.7" stroke-linecap="round"></circle>
                    </svg>
                    <div class="ring-icon" style="filter: grayscale(1) brightness(0);">üî•</div>
                </div>
            </div>

            <div class="macros-home-grid">
                <div class="macro-home-card">
                    <div class="macro-home-top">
                        <div class="macro-home-value"><span id="home-protein-eaten">0</span>–≥</div>
                        <div class="macro-home-label">–ë–µ–ª–∫–∏</div>
                    </div>
                    <div class="macro-home-ring">
                        <svg viewBox="0 0 36 36">
                            <circle cx="18" cy="18" r="16" fill="none" stroke="#f0f0f5" stroke-width="3"></circle>
                            <circle id="home-ring-protein" cx="18" cy="18" r="16" fill="none" stroke="#ff8a80" stroke-width="3" stroke-dasharray="100 100" stroke-dashoffset="100" stroke-linecap="round"></circle>
                        </svg>
                        <div class="macro-mini-icon">ü•©</div>
                    </div>
                </div>
                <div class="macro-home-card">
                    <div class="macro-home-top">
                        <div class="macro-home-value"><span id="home-carbs-eaten">0</span>–≥</div>
                        <div class="macro-home-label">–£–≥–ª–µ–≤–æ–¥—ã</div>
                    </div>
                    <div class="macro-home-ring">
                        <svg viewBox="0 0 36 36">
                            <circle cx="18" cy="18" r="16" fill="none" stroke="#f0f0f5" stroke-width="3"></circle>
                            <circle id="home-ring-carbs" cx="18" cy="18" r="16" fill="none" stroke="#ffcc80" stroke-width="3" stroke-dasharray="100 100" stroke-dashoffset="100" stroke-linecap="round"></circle>
                        </svg>
                        <div class="macro-mini-icon">üåæ</div>
                    </div>
                </div>
                <div class="macro-home-card">
                    <div class="macro-home-top">
                        <div class="macro-home-value"><span id="home-fats-eaten">0</span>–≥</div>
                        <div class="macro-home-label">–ñ–∏—Ä—ã</div>
                    </div>
                    <div class="macro-home-ring">
                        <svg viewBox="0 0 36 36">
                            <circle cx="18" cy="18" r="16" fill="none" stroke="#f0f0f5" stroke-width="3"></circle>
                            <circle id="home-ring-fats" cx="18" cy="18" r="16" fill="none" stroke="#81d4fa" stroke-width="3" stroke-dasharray="100 100" stroke-dashoffset="100" stroke-linecap="round"></circle>
                        </svg>
                        <div class="macro-mini-icon">ü•ë</div>
                    </div>
                </div>
            </div>

            <div class="recent-uploads">
                <h3>–ù–µ–¥–∞–≤–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ</h3>
                <div id="food-list" class="food-list">
                    <div class="empty-state">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π. –ù–∞–∂–º–∏—Ç–µ +, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å.</div>
                </div>
            </div>
            </div>
        </div>

        <div id="camera-screen" class="hidden">
            <video id="video-preview" autoplay playsinline muted></video>
            <div id="camera-permission-ui">
                <p id="camera-status-text">–†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –∫–∞–º–µ—Ä–µ, —á—Ç–æ–±—ã —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –µ–¥—É üì∏</p>
                <button id="retry-camera-btn" class="secondary-btn hidden" onclick="openCamera()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
            </div>
            
            <div id="analysis-overlay" class="hidden">
                <div id="analysis-card">
                    <h3>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º...</h3>
                    <div class="progress-ring-container">
                        <svg class="progress-ring" width="120" height="120">
                            <circle class="progress-ring__circle--track" stroke="#e6e6e9" stroke-width="8" fill="transparent" r="52" cx="60" cy="60"/>
                            <circle class="progress-ring__circle--progress" stroke="#000000" stroke-width="8" fill="transparent" r="52" cx="60" cy="60" id="analysis-progress-circle"/>
                        </svg>
                        <div class="progress-text-container">
                            <span id="analysis-percent-val">0</span><span>%</span>
                        </div>
                    </div>
                    <p class="analysis-status">–†–∞—Å–ø–æ–∑–Ω–∞–µ–º –µ–¥—É –∏ —Å—á–∏—Ç–∞–µ–º –∫–∞–ª–æ—Ä–∏–∏</p>
                </div>
            </div>

            <div class="camera-overlay">
                <div class="focus-corners"></div>
            </div>
            <div class="camera-controls">
                <div class="camera-close" onclick="closeCamera()">‚úï</div>
                <div id="shutter-btn" onclick="takePhoto()"></div>
                <div class="camera-help">?</div>
            </div>
            <canvas id="camera-canvas" style="display:none;"></canvas>
        </div>

        <div id="step-14" class="step hidden">
            <!-- Legacy analysis step hidden, replaced by overlay inside camera-screen -->
            <img id="analyzed-img" src="" style="display:none;">
        </div>

        <div id="step-15" class="step">
            <div class="progress-page">
                <div class="progress-card">
                    <div class="card-header-top">
                        <span class="card-title-small">–í—Å–µ–≥–æ –∫–∞–ª–æ—Ä–∏–π</span>
                        <div class="card-value-large">
                            <span id="progress-total-calories">0</span>
                            <span class="unit-text">–∫–∫–∞–ª</span>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <div class="y-axis">
                            <span>3000</span>
                            <span>2000</span>
                            <span>1000</span>
                            <span>0</span>
                        </div>
                        <div class="chart-bars">
                            <div class="chart-grid">
                                <div class="grid-line"></div>
                                <div class="grid-line"></div>
                                <div class="grid-line"></div>
                                <div class="grid-line"></div>
                            </div>
                            <div id="chart-bars-container" class="bars-wrapper">
                                <!-- Bars will be injected here -->
                            </div>
                        </div>
                    </div>

                    <div class="chart-legend">
                        <div class="legend-item">
                            <span class="dot protein"></span>
                            <span>–ë–µ–ª–∫–∏</span>
                        </div>
                        <div class="legend-item">
                            <span class="dot carbs"></span>
                            <span>–£–≥–ª–µ–≤–æ–¥—ã</span>
                        </div>
                        <div class="legend-item">
                            <span class="dot fats"></span>
                            <span>–ñ–∏—Ä—ã</span>
                        </div>
                    </div>
                </div>

                <div class="progress-card bmi-card">
                    <div class="bmi-header">
                        <h3>–í–∞—à –ò–ú–¢</h3>
                        <div class="help-icon bmi-info-icon" style="cursor: pointer;">?</div>
                    </div>
                    
                    <div class="bmi-value-row">
                        <span id="bmi-number" class="bmi-number">0.0</span>
                        <div class="bmi-status-box">
                            <span>–í–∞—à –≤–µ—Å:</span>
                            <span id="bmi-status-text" class="status-badge">–ù–æ—Ä–º–∞</span>
                        </div>
                    </div>

                    <div class="bmi-scale-container">
                        <div class="bmi-scale-gradient"></div>
                        <div id="bmi-pointer" class="bmi-pointer"></div>
                    </div>

                    <div class="bmi-labels">
                        <div class="label-item">
                            <span class="dot underweight"></span>
                            <span>–î–µ—Ñ–∏—Ü–∏—Ç</span>
                        </div>
                        <div class="label-item">
                            <span class="dot healthy"></span>
                            <span>–ù–æ—Ä–º–∞</span>
                        </div>
                        <div class="label-item">
                            <span class="dot overweight"></span>
                            <span>–õ–∏—à–Ω–∏–π</span>
                        </div>
                        <div class="label-item">
                            <span class="dot obese"></span>
                            <span>–û–∂–∏—Ä–µ–Ω–∏–µ</span>
                        </div>
                    </div>
                </div>
            </div>
        </div> <div id="step-16" class="step">
            <div class="settings-page-new">
                
                <div class="profile-header-center">
                    <div class="avatar-large-container" id="settings-avatar"></div>
                    <h2 id="settings-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
                    <div class="user-status-badge">Pro User</div>
                </div>

                <div class="settings-group-label">–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ</div>
                <div class="settings-list-container">
                    <div class="settings-row">
                        <span class="row-label">–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</span>
                        <div class="row-value-group">
                            <span id="set-activity-text">-</span>
                            <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </div>
                    </div>
                    <div class="settings-row">
                        <span class="row-label">–í–µ—Å</span>
                        <div class="row-value-group">
                            <span id="set-weight-text">-</span>
                            <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </div>
                    </div>
                    <div class="settings-row">
                        <span class="row-label">–¶–µ–ª—å</span>
                        <div class="row-value-group">
                            <span id="set-goal-text">-</span>
                            <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </div>
                    </div>
                    <div class="settings-row no-border">
                        <span class="row-label">–†–æ—Å—Ç</span>
                        <div class="row-value-group">
                            <span id="set-height-text">-</span>
                            <svg class="chevron-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
                        </div>
                    </div>
                </div>

                <div class="settings-group-label">–ë–æ–Ω—É—Å—ã</div>
                <div class="referral-box">
                    <div class="referral-icon">üéÅ</div>
                    <h3>–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞</h3>
                    <p>–ü–æ–ª—É—á–∏ –¥–æ—Å—Ç—É–ø –∫ –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º –∑–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞.</p>
                    <button class="referral-btn">–ü–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
                </div>

                <div class="settings-actions" style="margin-top: 30px;">
                    <button class="settings-btn danger-btn" onclick="resetAppData()">–°–±—Ä–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</button>
                </div>
                
                <div style="height: 100px;"></div>
            </div>
        </div>

    </div>
    <div id="global-tab-bar" class="tab-bar" style="display: none;">
        <div id="tab-home" class="tab-item active" onclick="nextStep(12)">
            <div class="tab-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
            </div>
        </div>
        <div id="tab-progress" class="tab-item" onclick="updateProgressPage()">
            <div class="tab-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
            </div>
        </div>
        <div id="tab-settings" class="tab-item" onclick="openSettings()">
            <div class="tab-icon">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
            </div>
        </div>
        <div class="add-btn-main" onclick="openCamera()">+</div>
        <div id="app-version-label" style="position: absolute; bottom: 2px; width: 100%; text-align: center; font-size: 8px; color: #ccc; pointer-events: none;">v1.2.0</div>
    </div>

    <div id="bmi-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3>–§–æ—Ä–º—É–ª–∞ –ò–ú–¢</h3>
            <div class="formula-box">
                <span class="formula-text">–ò–ú–¢ = –í–µ—Å (–∫–≥) / –†–æ—Å—Ç (–º)¬≤</span>
            </div>
            <p class="modal-desc">–ò–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –¥–µ–ª–µ–Ω–∏–µ–º –≤–µ—Å–∞ –≤ –∫–∏–ª–æ–≥—Ä–∞–º–º–∞—Ö –Ω–∞ –∫–≤–∞–¥—Ä–∞—Ç —Ä–æ—Å—Ç–∞ –≤ –º–µ—Ç—Ä–∞—Ö.</p>
            <button id="close-bmi-modal" class="primary-btn small">–ü–æ–Ω—è—Ç–Ω–æ</button>
        </div>
    </div>
    
    <script src="config.js"></script>
    <script src="script.js?v=999.0"></script>
</body>
</html> 
